<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Make a RAM (Reticular Action Model) — make_dsem_ram • dsem</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make a RAM (Reticular Action Model) — make_dsem_ram"><meta name="description" content="make_dsem_ram converts SEM arrow notation to ram describing SEM parameters"><meta property="og:description" content="make_dsem_ram converts SEM arrow notation to ram describing SEM parameters"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dsem</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/dynamic_factor_analysis.html">Dynamic factor analysis</a></li>
    <li><a class="dropdown-item" href="../articles/spatial_diffusion.html">Spatial diffusion</a></li>
    <li><a class="dropdown-item" href="../articles/vignette.html">Demonstration of selected features</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/James-Thorson-NOAA/dsem/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Make a RAM (Reticular Action Model)</h1>
      <small class="dont-index">Source: <a href="https://github.com/James-Thorson-NOAA/dsem/blob/main/R/make_dsem_ram.R" class="external-link"><code>R/make_dsem_ram.R</code></a></small>
      <div class="d-none name"><code>make_dsem_ram.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>make_dsem_ram</code> converts SEM arrow notation to <code>ram</code> describing SEM parameters</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">make_dsem_ram</span><span class="op">(</span></span>
<span>  <span class="va">sem</span>,</span>
<span>  <span class="va">times</span>,</span>
<span>  <span class="va">variables</span>,</span>
<span>  covs <span class="op">=</span> <span class="va">variables</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  remove_na <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-sem">sem<a class="anchor" aria-label="anchor" href="#arg-sem"></a></dt>
<dd><p>Specification for time-series structural equation model structure
including lagged or simultaneous effects.  See Details section in
<code>make_dsem_ram</code> for more description</p></dd>


<dt id="arg-times">times<a class="anchor" aria-label="anchor" href="#arg-times"></a></dt>
<dd><p>A character vector listing the set of times in order</p></dd>


<dt id="arg-variables">variables<a class="anchor" aria-label="anchor" href="#arg-variables"></a></dt>
<dd><p>A character vector listing the set of variables</p></dd>


<dt id="arg-covs">covs<a class="anchor" aria-label="anchor" href="#arg-covs"></a></dt>
<dd><p>A character vector listing variables for which to estimate a standard deviation</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Boolean indicating whether to print messages to terminal</p></dd>


<dt id="arg-remove-na">remove_na<a class="anchor" aria-label="anchor" href="#arg-remove-na"></a></dt>
<dd><p>Boolean indicating whether to remove NA values from RAM (default) or not.
<code>remove_NA=FALSE</code> might be useful for exploration and diagnostics for
advanced users</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A reticular action module (RAM) describing dependencies</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>RAM specification using arrow-and-lag notation</strong></p>
<p>Each line of the RAM specification for <code>make_dsem_ram</code> consists of four (unquoted) entries,
separated by commas:</p>
<dl><dt>1. Arrow specification:</dt>
<dd><p>This is a simple formula, of the form
    <code>A -&gt; B</code> or, equivalently, <code>B &lt;- A</code> for a regression
    coefficient (i.e., a single-headed or directional arrow);
    <code>A &lt;-&gt; A</code> for a variance or <code>A &lt;-&gt; B</code> for a covariance
    (i.e., a double-headed or bidirectional arrow). Here, <code>A</code> and
    <code>B</code> are variable names in the model. If a name does not correspond
    to an observed variable, then it is assumed to be a latent variable.
    Spaces can appear freely in an arrow specification, and
    there can be any number of hyphens in the arrows, including zero: Thus,
    e.g., <code>A-&gt;B</code>, <code>A --&gt; B</code>, and <code>A&gt;B</code> are all legitimate
    and equivalent.</p></dd>

  <dt>2. Lag (using positive values):</dt>
<dd><p>An integer specifying whether the linkage
    is simultaneous (<code>lag=0</code>) or lagged (e.g., <code>X -&gt; Y, 1, XtoY</code>
    indicates that X in time T affects Y in time T+1), where
    only one-headed arrows can be lagged. Using positive values to indicate lags
     then matches the notational convention used in package <span class="pkg">dynlm</span>.</p></dd>

  <dt>3. Parameter name:</dt>
<dd><p>The name of the regression coefficient, variance,
    or covariance specified by the arrow. Assigning the same name to two or
    more arrows results in an equality constraint. Specifying the parameter name
    as <code>NA</code> produces a fixed parameter.</p></dd>

  <dt>4. Value:</dt>
<dd><p>start value for a free parameter or value of a fixed parameter.
    If given as <code>NA</code> (or simply omitted), the model is provide a default
    starting value.</p></dd>


</dl><p>Lines may end in a comment following #. The function extends code copied from package
`sem` under licence GPL (&gt;= 2) with permission from John Fox.</p>
<p><strong>Simultaneous autoregressive process for simultaneous and lagged effects</strong></p>
<p>This text then specifies linkages in a multivariate time-series model for variables \(\mathbf X\)
with dimensions \(T \times C\) for \(T\) times and \(C\) variables.
<code>make_dsem_ram</code> then parses this text to build a path matrix \(\mathbf{P}\) with
dimensions \(TC \times TC\), where element \(\rho_{k_2,k_1}\)
represents the impact of \(x_{t_1,c_1}\) on \(x_{t_2,c_2}\), where \(k_1=T c_1+t_1\)
and \(k_2=T c_2+t_2\).  This path matrix defines a simultaneous equation</p>
<p>$$ \mathrm{vec}(\mathbf X) = \mathbf P \mathrm{vec}(\mathbf X) + \mathrm{vec}(\mathbf \Delta)$$</p>
<p>where \(\mathbf \Delta\) is a matrix of exogenous errors with covariance \(\mathbf{V = \Gamma \Gamma}^t\),
where \(\mathbf \Gamma\) is the Cholesky of exogenous covariance.  This
simultaneous autoregressive (SAR) process then results in \(\mathbf X\) having covariance:</p>
<p>$$ \mathrm{Cov}(\mathbf X) = \mathbf{(I - P)}^{-1} \mathbf{\Gamma \Gamma}^t \mathbf{((I - P)}^{-1})^t $$</p>
<p>Usefully, computing the inverse-covariance (precision) matrix \(\mathbf{Q = V}^{-1}\) does not require inverting \(\mathbf{(I - P)}\):</p>
<p>$$ \mathbf{Q} = (\mathbf{\Gamma}^{-1} \mathbf{(I - P)})^t \mathbf{\Gamma}^{-1} \mathbf{(I - P)} $$</p>
<p><strong>Example: univariate first-order autoregressive model</strong></p>
<p>This simultaneous autoregressive (SAR) process across variables and times
allows the user to specify both simutanous effects (effects among variables within
year \(T\)) and lagged effects (effects among variables among years \(T\)).
As one example, consider a univariate and first-order autoregressive process where \(T=4\).
with independent errors.  This is specified by passing <code> sem = "X -&gt; X, 1, rho \n X &lt;-&gt; X, 0, sigma" </code> to <code>make_dsem_ram</code>.
This is then parsed to a RAM:</p>
<table class="table table"><tr><td><strong>heads</strong></td><td><strong>to</strong></td><td><strong>from</strong></td><td><strong>paarameter</strong></td><td><strong>start</strong></td></tr><tr><td>1</td><td>2</td><td>1</td><td>1</td><td>&lt;NA&gt;</td></tr><tr><td>1</td><td>3</td><td>2</td><td>1</td><td>&lt;NA&gt;</td></tr><tr><td>1</td><td>4</td><td>3</td><td>1</td><td>&lt;NA&gt;</td></tr><tr><td>2</td><td>1</td><td>1</td><td>2</td><td>&lt;NA&gt;</td></tr><tr><td>2</td><td>2</td><td>2</td><td>2</td><td>&lt;NA&gt;</td></tr><tr><td>2</td><td>3</td><td>3</td><td>2</td><td>&lt;NA&gt;</td></tr><tr><td>2</td><td>4</td><td>4</td><td>2</td><td>&lt;NA&gt;</td></tr></table><p>Rows of this RAM where <code>heads=1</code> are then interpreted to construct the path matrix \(\mathbf P\), where column "from"
in the RAM indicates column number in the matrix, column "to" in the RAM indicates row number in the matrix:</p>
<p>$$ \mathbf P = \begin{bmatrix}
    0 &amp; 0 &amp; 0 &amp; 0 \\
    \rho &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; \rho &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; \rho &amp; 0\\
    \end{bmatrix} $$</p>
<p>While rows where <code>heads=2</code> are interpreted to construct the Cholesky of exogenous covariance \(\mathbf \Gamma\)
and column "parameter" in the RAM associates each nonzero element of those
two matrices with an element of a vector of estimated parameters:</p>
<p>$$ \mathbf \Gamma = \begin{bmatrix}
    \sigma &amp; 0 &amp; 0 &amp; 0 \\
    0 &amp; \sigma &amp; 0 &amp; 0 \\
    0 &amp; 0 &amp; \sigma &amp; 0 \\
    0 &amp; 0 &amp; 0 &amp; \sigma\\
    \end{bmatrix} $$</p>
<p>with two estimated parameters \(\mathbf \beta = (\rho, \sigma) \). This then results in covariance:</p>
<p>$$ \mathrm{Cov}(\mathbf X) = \sigma^2 \begin{bmatrix}
    1      &amp; \rho^1              &amp; \rho^2                        &amp; \rho^3                  \\
    \rho^1 &amp; 1 + \rho^2          &amp; \rho^1 (1 + \rho^2)           &amp; \rho^2 (1 + \rho^2)     \\
    \rho^2 &amp; \rho^1 (1 + \rho^2) &amp; 1 + \rho^2 + \rho^4           &amp; \rho^1 (1 + \rho^2 + \rho^4)                 \\
    \rho^3 &amp; \rho^2 (1 + \rho^2) &amp; \rho^1 (1 + \rho^2 + \rho^4)  &amp; 1 + \rho^2 + \rho^4 + \rho^6 \\
    \end{bmatrix} $$</p>
<p>Which converges on the stationary covariance for an AR1 process for times \(t&gt;&gt;1\):</p>
<p>$$ \mathrm{Cov}(\mathbf X) = \frac{\sigma^2}{1+\rho^2} \begin{bmatrix}
    1 &amp; \rho^1 &amp; \rho^2 &amp; \rho^3 \\
    \rho^1 &amp; 1 &amp; \rho^1 &amp; \rho^2 \\
    \rho^2 &amp; \rho^1 &amp; 1 &amp; \rho^1 \\
    \rho^3 &amp; \rho^2 &amp; \rho^1 &amp; 1\\
    \end{bmatrix} $$</p>
<p>except having a lower pointwise variance for the initial times, which arises as a "boundary effect".</p>
<p>Similarly, the arrow-and-lag notation can be used to specify a SAR representing
a conventional structural equation model (SEM), cross-lagged (a.k.a. vector autoregressive)
models (VAR), dynamic factor analysis (DFA), or many other time-series models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Univariate AR1</span></span></span>
<span class="r-in"><span><span class="va">sem</span> <span class="op">=</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">  X -&gt; X, 1, rho</span></span></span>
<span class="r-in"><span><span class="st">  X &lt;-&gt; X, 0, sigma</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="fu">make_dsem_ram</span><span class="op">(</span> sem<span class="op">=</span><span class="va">sem</span>, variables<span class="op">=</span><span class="st">"X"</span>, times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      path lag  name start parameter first second direction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  X -&gt; X   1   rho    NA         1     X      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 X &lt;-&gt; X   0 sigma    NA         2     X      X         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ram</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   heads to from parameter start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1  2    1         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1  3    2         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1  4    3         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     2  1    1         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     2  2    2         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     2  3    3         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     2  4    4         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "X"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $times</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dsem_ram"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Univariate AR2</span></span></span>
<span class="r-in"><span><span class="va">sem</span> <span class="op">=</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">  X -&gt; X, 1, rho1</span></span></span>
<span class="r-in"><span><span class="st">  X -&gt; X, 2, rho2</span></span></span>
<span class="r-in"><span><span class="st">  X &lt;-&gt; X, 0, sigma</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="fu">make_dsem_ram</span><span class="op">(</span> sem<span class="op">=</span><span class="va">sem</span>, variables<span class="op">=</span><span class="st">"X"</span>, times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      path lag  name start parameter first second direction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  X -&gt; X   1  rho1    NA         1     X      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  X -&gt; X   2  rho2    NA         2     X      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 X &lt;-&gt; X   0 sigma    NA         3     X      X         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ram</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   heads to from parameter start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1  2    1         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     1  3    1         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     1  3    2         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     1  4    2         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     1  4    3         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     2  1    1         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     2  2    2         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     2  3    3         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     2  4    4         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "X"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $times</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dsem_ram"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Bivariate VAR</span></span></span>
<span class="r-in"><span><span class="va">sem</span> <span class="op">=</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">  X -&gt; X, 1, XtoX</span></span></span>
<span class="r-in"><span><span class="st">  X -&gt; Y, 1, XtoY</span></span></span>
<span class="r-in"><span><span class="st">  Y -&gt; X, 1, YtoX</span></span></span>
<span class="r-in"><span><span class="st">  Y -&gt; Y, 1, YtoY</span></span></span>
<span class="r-in"><span><span class="st">  X &lt;-&gt; X, 0, sdX</span></span></span>
<span class="r-in"><span><span class="st">  Y &lt;-&gt; Y, 0, sdY</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="fu">make_dsem_ram</span><span class="op">(</span> sem<span class="op">=</span><span class="va">sem</span>, variables<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>,<span class="st">"Y"</span><span class="op">)</span>, times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      path lag name start parameter first second direction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  X -&gt; X   1 XtoX    NA         1     X      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  X -&gt; Y   1 XtoY    NA         2     X      Y         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  Y -&gt; X   1 YtoX    NA         3     Y      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  Y -&gt; Y   1 YtoY    NA         4     Y      Y         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 X &lt;-&gt; X   0  sdX    NA         5     X      X         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Y &lt;-&gt; Y   0  sdY    NA         6     Y      Y         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ram</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    heads to from parameter start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1  2    1         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1  6    1         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1  3    2         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1  7    2         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1  4    3         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1  8    3         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      1  2    5         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      1  6    5         4    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      1  3    6         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     1  7    6         4    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     1  4    7         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     1  8    7         4    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     2  1    1         5    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     2  2    2         5    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     2  3    3         5    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     2  4    4         5    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     2  5    5         6    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     2  6    6         6    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     2  7    7         6    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     2  8    8         6    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "X" "Y"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $times</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dsem_ram"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Dynamic factor analysis with one factor and two manifest variables</span></span></span>
<span class="r-in"><span><span class="co"># (specifies a random-walk for the factor, and miniscule residual SD)</span></span></span>
<span class="r-in"><span><span class="va">sem</span> <span class="op">=</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">  factor -&gt; X, 0, loadings1</span></span></span>
<span class="r-in"><span><span class="st">  factor -&gt; Y, 0, loadings2</span></span></span>
<span class="r-in"><span><span class="st">  factor -&gt; factor, 1, NA, 1</span></span></span>
<span class="r-in"><span><span class="st">  X &lt;-&gt; X, 0, NA, 0.01       # Fix at negligible value</span></span></span>
<span class="r-in"><span><span class="st">  Y &lt;-&gt; Y, 0, NA, 0.01       # Fix at negligible value</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="fu">make_dsem_ram</span><span class="op">(</span> sem<span class="op">=</span><span class="va">sem</span>, variables<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>,<span class="st">"Y"</span>,<span class="st">"factor"</span><span class="op">)</span>, times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                path lag      name start parameter  first second direction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       factor -&gt; X   0 loadings1    NA         1 factor      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       factor -&gt; Y   0 loadings2    NA         2 factor      Y         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  factor -&gt; factor   1      &lt;NA&gt;  1.00         0 factor factor         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           X &lt;-&gt; X   0      &lt;NA&gt;  0.01         0      X      X         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           Y &lt;-&gt; Y   0      &lt;NA&gt;  0.01         0      Y      Y         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 factor &lt;-&gt; factor   0 V[factor]    NA         3 factor factor         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ram</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    heads to from parameter start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1  1    9         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1  5    9         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1 10    9         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1  2   10         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1  6   10         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1 11   10         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      1  3   11         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      1  7   11         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      1 12   11         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     1  4   12         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     1  8   12         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     2  1    1         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     2  2    2         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     2  3    3         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     2  4    4         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     2  5    5         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     2  6    6         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     2  7    7         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     2  8    8         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     2  9    9         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21     2 10   10         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22     2 11   11         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23     2 12   12         3    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "X"      "Y"      "factor"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $times</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dsem_ram"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ARIMA(1,1,0)</span></span></span>
<span class="r-in"><span><span class="va">sem</span> <span class="op">=</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">  factor -&gt; factor, 1, rho1 # AR1 component</span></span></span>
<span class="r-in"><span><span class="st">  X -&gt; X, 1, NA, 1          # Integrated component</span></span></span>
<span class="r-in"><span><span class="st">  factor -&gt; X, 0, NA, 1</span></span></span>
<span class="r-in"><span><span class="st">  X &lt;-&gt; X, 0, NA, 0.01      # Fix at negligible value</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="fu">make_dsem_ram</span><span class="op">(</span> sem<span class="op">=</span><span class="va">sem</span>, variables<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>,<span class="st">"factor"</span><span class="op">)</span>, times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                path lag      name start parameter  first second direction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  factor -&gt; factor   1      rho1    NA         1 factor factor         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2            X -&gt; X   1      &lt;NA&gt;  1.00         0      X      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       factor -&gt; X   0      &lt;NA&gt;  1.00         0 factor      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4           X &lt;-&gt; X   0      &lt;NA&gt;  0.01         0      X      X         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 factor &lt;-&gt; factor   0 V[factor]    NA         2 factor factor         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ram</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    heads to from parameter start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1  2    1         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1  3    2         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1  4    3         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1  1    5         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1  6    5         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1  2    6         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      1  7    6         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      1  3    7         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      1  8    7         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     1  4    8         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     2  1    1         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     2  2    2         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     2  3    3         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     2  4    4         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     2  5    5         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     2  6    6         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     2  7    7         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18     2  8    8         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "X"      "factor"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $times</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dsem_ram"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ARIMA(0,0,1)</span></span></span>
<span class="r-in"><span><span class="va">sem</span> <span class="op">=</span> <span class="st">"</span></span></span>
<span class="r-in"><span><span class="st">  factor -&gt; X, 0, NA, 1</span></span></span>
<span class="r-in"><span><span class="st">  factor -&gt; X, 1, rho1     # MA1 component</span></span></span>
<span class="r-in"><span><span class="st">  X &lt;-&gt; X, 0, NA, 0.01     # Fix at negligible value</span></span></span>
<span class="r-in"><span><span class="st">"</span></span></span>
<span class="r-in"><span><span class="fu">make_dsem_ram</span><span class="op">(</span> sem<span class="op">=</span><span class="va">sem</span>, variables<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>,<span class="st">"factor"</span><span class="op">)</span>, times<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span> <span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                path lag      name start parameter  first second direction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       factor -&gt; X   0      &lt;NA&gt;  1.00         0 factor      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       factor -&gt; X   1      rho1    NA         1 factor      X         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3           X &lt;-&gt; X   0      &lt;NA&gt;  0.01         0      X      X         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 factor &lt;-&gt; factor   0 V[factor]    NA         2 factor factor         2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $ram</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    heads to from parameter start</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1  1    5         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1  2    5         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1  2    6         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1  3    6         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1  3    7         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1  4    7         1    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      1  4    8         0  1.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      2  1    1         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      2  2    2         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     2  3    3         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     2  4    4         0  0.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     2  5    5         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     2  6    6         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     2  7    7         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15     2  8    8         2    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "X"      "factor"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $times</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2 3 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"class")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "dsem_ram"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James Thorson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

